---
title: ffmpeg使用教程
description: 如何使用ffmpeg，不包含基础操作，比如ffmpeg -i input output
---

# 手动选择流

ffmpeg有一个选择器语法，用来处理多文件中的多个流。选择器是使用冒号`:`分隔的多个字母，可以使用`-map`来指定，语法格式为`<index>:<type>`，其中`index`为从0开始的文件下标，`type`是文件类型。

ffmpeg在未指定流是会使用默认算法来选择流，比如最简单的命令`ffmpeg -i a.mkv b.mp4`就会自动选择，选择算法如下：

- 对于视频，选择分辨率最高的流。
- 对于音频，选择声道最多的流。
- 对字幕，选择第一个字幕同时显示警告。

如果出现相同条件的多个流，那么第一个流会被选中。

> **注意**
> 使用`-map`不能合并视频，只能输出一个产物，考虑以下命令：
> ```
> ffmpeg -i a.mp4 b.mp4 c.mp4  -map 0:a -map 1:v -map 2:s out.mp4
> ```
> 这条命令并不会将三个视频中的流合并，而是只输出c.mp4中的字幕。